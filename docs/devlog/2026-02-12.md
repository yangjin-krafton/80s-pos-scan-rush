# 2026-02-12 Devlog — 오디오 파이프라인 정리 + SFX/BGM 생성

비개발자 직군이 “요청 → 결과 확인 → 다음 요청” 흐름으로 빠르게 구현을 쌓아갈 때, 시행착오를 줄이기 위한 기록.

## 오늘의 목표

- 모바일 웹용 SFX를 `.m4a`로 생성하고, 게임 흐름에 맞는 사운드로 정리
- SFX 설명 문서 추가
- BGM 스템(악기/음역대별) 생성 스크립트 추가

## 사용한 요청(프롬프트)와 결과

### 1) 모바일 웹용 SFX 포맷 전환

**요청**
- `.wav` 대신 iOS/Android 웹에서 더 압축된 포맷 사용
- `ffmpeg` 기반 변환 파이프라인

**결과**
- `src/sfx_gen.py`는 WAV 마스터를 `src/assets/sfx_wav/`에 출력
- `src/sfx_encode.py`가 WAV → `.m4a(AAC 96kbps mono)`로 변환 후 WAV 삭제

**확인 포인트**
- `python3 src/sfx_gen.py` → `src/assets/sfx_wav/*.wav` 생성
- `python3 src/sfx_encode.py` → `src/assets/sfx/*.m4a` 생성 + WAV 자동 삭제

**관련 파일**
- `src/sfx_gen.py`
- `src/sfx_encode.py`

### 2) README 기준 SFX 재정의 + 다양화

**요청**
- 게임 흐름에 맞는 SFX만 남기고 재생성
- 더 게임스럽고 다양한 음역대 사용

**결과**
- SFX 9종으로 정리 및 톤 다층화
- 최종 `.m4a` 목록 생성 완료

**확인 포인트**
- `src/assets/sfx/`에 아래 파일이 있는지 확인
  - `ui_click.m4a`
  - `item_pickup.m4a`
  - `item_bag.m4a`
  - `scan_beep.m4a`
  - `scan_fail.m4a`
  - `checkout_success.m4a`
  - `checkout_fail.m4a`
  - `combo_up.m4a`
  - `warning.m4a`

**관련 파일**
- `src/sfx_gen.py`
- `src/assets/sfx/`

### 3) SFX 설명 문서 추가

**요청**
- 나중에 개발자가 참고할 수 있도록 사운드 설명 추가

**결과**
- `src/assets/sfx/SFX.md`에 각 파일 용도/느낌 기록

**확인 포인트**
- `src/assets/sfx/SFX.md` 내용 확인

**관련 파일**
- `src/assets/sfx/SFX.md`

### 4) BGM 트랙 생성 스크립트 추가

**요청**
- 악기별/음역대별 트랙을 3개씩 생성
- 게임 진행 중 랜덤 재생용

**결과**
- `src/bgm_gen.py` 추가
- `bass/pad/lead` × `low/mid/high` × 3변주 = 27개 `.m4a` 생성
- 생성 위치: `src/assets/bgm/`

**확인 포인트**
- `python3 src/bgm_gen.py`
- `src/assets/bgm/`에 `bgm_bass_low_01.m4a` 등 27개 존재

**관련 파일**
- `src/bgm_gen.py`
- `src/assets/bgm/`

## 다음에 이어서 할 일(요청 후보)

- BGM 랜덤 재생 로직 설계 (트랙 풀, 교체 타이밍, 크로스페이드 여부)
- SFX/BGM 볼륨 밸런스 기준 정하기
- 모바일 브라우저에서 실제 재생 테스트 (iOS/Android)

## 바이브 코딩 팁(비개발자 관점)

- 사운드는 “목적(행동)” 기준으로 먼저 이름을 정리하면 나중에 연결이 쉬움
- 모바일 웹은 `.m4a`가 가장 무난하니, 최종 배포는 `.m4a`만 유지
- BGM은 짧은 루프 여러 개를 랜덤 재생하면 반복감이 줄어듦
