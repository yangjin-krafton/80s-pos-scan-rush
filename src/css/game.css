/* ================================================================
   POS SCAN RUSH â€” Game Stylesheet
   Extracted from concept mockup + game-specific additions
   ================================================================ */

*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;overflow:hidden;
  touch-action:none;
  overscroll-behavior:none;
  -webkit-user-select:none;user-select:none;
  -webkit-touch-callout:none;
}
body{
  font-family:Tahoma,'Segoe UI',sans-serif;
  font-size:16px;
  color:#000;
  background:#008080;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* === CRT phosphor glow overlay === */
body::before{
  content:"";position:fixed;inset:0;pointer-events:none;z-index:9999;
  background:repeating-linear-gradient(180deg,
    transparent 0px,transparent 2px,
    rgba(0,0,0,0.04) 2px,rgba(0,0,0,0.04) 4px);
}
body::after{
  content:"";position:fixed;inset:0;pointer-events:none;z-index:9998;
  background:radial-gradient(ellipse at 50% 50%,
    rgba(180,255,200,0.03) 0%,
    transparent 50%,
    rgba(0,0,0,0.18) 100%);
}

/* === Tiled desktop pattern === */
body{
  background-color:#008080;
  background-image:
    linear-gradient(45deg, rgba(0,0,0,0.03) 25%, transparent 25%),
    linear-gradient(-45deg, rgba(0,0,0,0.03) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, rgba(0,0,0,0.03) 75%),
    linear-gradient(-45deg, transparent 75%, rgba(0,0,0,0.03) 75%);
  background-size:20px 20px;
  background-position:0 0, 0 10px, 10px -10px, -10px 0;
}

/* === GAME SHELL (CRT Monitor frame) === */
.game{
  width:360px;
  height:640px;
  display:grid;
  grid-template-columns:minmax(0,1fr);
  grid-template-rows:
    auto          /* [1] info bar */
    auto          /* [2] customer scene */
    1fr           /* [3] MID SPLIT: POS | SCAN */
    auto          /* [4] cart carousel */
    auto          /* [5] action buttons */
  ;
  transform-origin:center center;
  background:#008080;
  position:relative;
  border-radius:12px;
  box-shadow:
    inset 0 0 60px rgba(0,0,0,0.15),
    inset 0 0 120px rgba(0,0,0,0.05),
    0 0 0 3px #333,
    0 0 0 6px #555,
    0 0 0 8px #222;
  overflow:hidden;
}

/* ================================================================
   Win95 Window Chrome
   ================================================================ */
.win-raised{
  border:2px solid;
  border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
}
.win-sunken{
  border:2px solid;
  border-color:#808080 #dfdfdf #dfdfdf #808080;
  box-shadow:inset 1px 1px 0 #000, inset -1px -1px 0 #fff;
}
.win-titlebar{
  display:flex;align-items:center;justify-content:space-between;
  padding:2px 3px;
  background:linear-gradient(90deg,#000080,#1084d0);
  color:#fff;
  font-family:Tahoma,sans-serif;font-size:11px;font-weight:bold;
  flex-shrink:0;min-height:20px;gap:4px;
}
.win-titlebar .win-title-text{
  flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  padding-left:2px;text-shadow:1px 1px 0 rgba(0,0,0,0.3);
}
.win-titlebar .win-icon{font-size:12px;flex-shrink:0}
.win-controls{display:flex;gap:2px;flex-shrink:0}
.win-ctrl-btn{
  width:16px;height:14px;background:#c0c0c0;
  border:1px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  display:flex;align-items:center;justify-content:center;
  font-size:8px;font-weight:bold;font-family:'Courier New',monospace;
  color:#000;line-height:1;cursor:pointer;
}
.win-ctrl-btn:active{
  border-color:#000 #dfdfdf #dfdfdf #000;
  box-shadow:inset 1px 1px 0 #808080, inset -1px -1px 0 #fff;
}

/* ================================================================
   [1] INFO BAR
   ================================================================ */
.info-bar{
  display:flex;justify-content:space-between;align-items:center;
  padding:2px 4px calc(2px + env(safe-area-inset-top));
  background:#c0c0c0;
  border-bottom:2px solid #808080;
  border-top:2px solid #dfdfdf;
  box-shadow:inset 0 1px 0 #fff;
  font-family:Tahoma,sans-serif;font-size:11px;min-height:28px;
}
.info-bar .logo{
  font-size:11px;font-weight:900;letter-spacing:0.08em;color:#000;
  background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  padding:2px 8px;display:flex;align-items:center;gap:4px;
  min-height:22px;cursor:pointer;
}
.info-bar .logo:active{
  border-color:#000 #dfdfdf #dfdfdf #000;
  box-shadow:inset 1px 1px 0 #808080, inset -1px -1px 0 #fff;
}
.info-bar .logo::before{
  content:"";display:inline-block;width:16px;height:16px;
  background:linear-gradient(135deg, #ff0000 25%, #00ff00 25%, #00ff00 50%, #0000ff 50%, #0000ff 75%, #ffff00 75%);
  border:1px solid #808080;
}
.info-bar .stats{display:flex;gap:2px;font-size:11px;font-weight:bold;font-family:Tahoma,sans-serif}
.info-bar .stats > span{
  background:#c0c0c0;
  border:1px solid;border-color:#808080 #dfdfdf #dfdfdf #808080;
  box-shadow:inset 1px 1px 0 #000, inset -1px -1px 0 #fff;
  padding:2px 8px;display:flex;align-items:center;gap:4px;min-height:22px;
}
.info-bar .lbl{color:#000080;font-size:10px}
.info-bar .val{color:#000;font-weight:900}

/* ================================================================
   [2] CUSTOMER SCENE
   ================================================================ */
.customer-scene{
  position:relative;height:88px;margin:2px 0 0;overflow:hidden;
  image-rendering:pixelated;-ms-interpolation-mode:nearest-neighbor;
  border-bottom:2px solid #000;
}
.scene-bg{
  position:absolute;inset:0;
  background:
    linear-gradient(180deg,
      #3a2518 0,#3a2518 2px,transparent 2px,transparent 18px,
      #2a1a10 18px,#2a1a10 20px,transparent 20px,transparent 100%),
    repeating-linear-gradient(90deg,#6b4c35 0,#6b4c35 30px,#5a3f2c 30px,#5a3f2c 32px),
    #5e4230;
  background-size:100% 100%, 32px 18px, 100% 100%;
}
.scene-bg::before{
  content:"";position:absolute;top:3px;left:8px;right:8px;height:14px;
  background:linear-gradient(90deg,
    #e02020 0,#e02020 8px,transparent 8px,transparent 14px,
    #20a020 14px,#20a020 22px,transparent 22px,transparent 28px,
    #2060e0 28px,#2060e0 36px,transparent 36px,transparent 44px,
    #e0c020 44px,#e0c020 52px,transparent 52px,transparent 58px,
    #e06020 58px,#e06020 66px,transparent 66px,transparent 74px,
    #c020c0 74px,#c020c0 82px,transparent 82px,transparent 90px,
    #20c0c0 90px,#20c0c0 98px,transparent 98px,transparent 106px,
    #e02020 106px,#e02020 114px,transparent 114px,transparent 100%);
  background-size:120px 10px;background-repeat:repeat-x;
  background-position:0 2px;image-rendering:pixelated;
}
.scene-floor{
  position:absolute;bottom:0;left:0;right:0;height:18px;
  background:repeating-conic-gradient(#b89878 0% 25%,#a08868 0% 50%) 0 0 / 12px 12px;
  border-top:2px solid #3a2518;
}
.scene-hud{
  position:absolute;top:0;left:0;right:0;
  display:flex;justify-content:space-between;align-items:flex-start;
  padding:3px 6px;z-index:5;pointer-events:none;
}
.hud-left{display:flex;flex-direction:column;gap:1px}
.hud-name{
  font-family:'Courier New',monospace;font-size:10px;font-weight:bold;color:#fff;
  text-shadow:1px 1px 0 #000,-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000;
  letter-spacing:0.5px;
}
.hud-hearts{display:flex;gap:1px}
.hud-heart{
  width:10px;height:9px;font-size:0;background:#e00040;
  clip-path:polygon(0% 35%,10% 15%,25% 0%,40% 0%,50% 15%,60% 0%,75% 0%,90% 15%,100% 35%,50% 100%);
  image-rendering:pixelated;
}
.hud-heart.empty{background:#402;opacity:0.5}
.hud-heart.warn{background:#e0a000}
.hud-right{
  font-family:'Courier New',monospace;font-size:9px;font-weight:bold;color:#ffe040;
  text-shadow:1px 1px 0 #000,-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000;
}
.px-current{
  position:absolute;left:20px;bottom:18px;
  display:flex;flex-direction:column;align-items:center;z-index:3;
  animation:px-idle 0.8s steps(1) infinite;
}
@keyframes px-idle{0%,100%{transform:translateY(0)}50%{transform:translateY(-2px)}}
.px-head{font-size:26px;line-height:1;filter:drop-shadow(1px 1px 0 #000)}
.px-body{
  width:20px;height:14px;background:#3060d0;border:2px solid #000;border-top:none;
  position:relative;image-rendering:pixelated;
}
.px-body::before,.px-body::after{
  content:"";position:absolute;top:1px;width:4px;height:8px;
  background:#3060d0;border:1px solid #000;
}
.px-body::before{left:-5px}
.px-body::after{right:-5px}
.px-legs{display:flex;gap:4px}
.px-leg{width:6px;height:6px;background:#204080;border:1px solid #000}
.px-bubble{
  position:absolute;left:56px;bottom:52px;background:#fff;color:#000;
  font-family:'Courier New',monospace;font-size:10px;font-weight:bold;
  padding:3px 8px;border:2px solid #000;z-index:4;white-space:nowrap;
  image-rendering:auto;transition:color 0.2s;
}
.px-bubble::before{
  content:"";position:absolute;bottom:-6px;left:8px;
  width:6px;height:6px;background:#fff;
  border-right:2px solid #000;border-bottom:2px solid #000;
  transform:skewY(-20deg);
}
.px-bubble.feedback-error{color:#c00;border-color:#c00}
.px-bubble.feedback-error::before{border-color:#c00}

/* Queue characters */
.px-queue{
  position:absolute;right:6px;bottom:18px;
  display:flex;flex-direction:row-reverse;gap:4px;z-index:2;
}
.px-qchar{display:flex;flex-direction:column;align-items:center}
.px-qchar .qc-head{font-size:16px;line-height:1;filter:drop-shadow(1px 1px 0 #000)}
.px-qchar .qc-body{width:14px;height:10px;border:1px solid #000;border-top:none}
.px-qchar .qc-legs{display:flex;gap:2px}
.px-qchar .qc-leg{width:4px;height:4px;border:1px solid #000}
.px-qchar:nth-child(1) .qc-body{background:#d03030}
.px-qchar:nth-child(1) .qc-leg{background:#a02020}
.px-qchar:nth-child(2) .qc-body{background:#30a030}
.px-qchar:nth-child(2) .qc-leg{background:#208020}
.px-qchar:nth-child(3) .qc-body{background:#d0a020}
.px-qchar:nth-child(3) .qc-leg{background:#a08018}
.px-qchar:nth-child(4) .qc-body{background:#a030c0}
.px-qchar:nth-child(4) .qc-leg{background:#8020a0}
.px-qchar:nth-child(5) .qc-body{background:#30a0c0}
.px-qchar:nth-child(5) .qc-leg{background:#2080a0}
.px-qchar:nth-child(odd){animation:q-sway 1s steps(1) infinite}
.px-qchar:nth-child(even){animation:q-sway 1s steps(1) 0.5s infinite}
@keyframes q-sway{0%,100%{transform:translateY(0)}50%{transform:translateY(-1px)}}
.px-qchar:nth-child(4){opacity:0.6}
.px-qchar:nth-child(5){opacity:0.35}

/* Counter/register */
.px-counter{
  position:absolute;left:60px;bottom:18px;width:24px;height:22px;
  background:#808080;border:2px solid #000;z-index:2;image-rendering:pixelated;
}
.px-counter::before{
  content:"";position:absolute;top:2px;left:3px;width:16px;height:8px;
  background:#40e040;border:1px solid #000;
}
.px-counter::after{
  content:"";position:absolute;bottom:2px;left:6px;right:6px;height:3px;
  background:#404040;border:1px solid #222;
}

/* ================================================================
   [3] MID SPLIT
   ================================================================ */
.mid-split{
  display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1fr);
  min-height:0;overflow:hidden;gap:3px;padding:3px 4px;background:#008080;
}

/* ---- LEFT: POS LIST ---- */
.pos-panel{
  display:flex;flex-direction:column;background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  min-height:0;overflow:hidden;
}
.pos-head{
  display:flex;justify-content:space-between;align-items:center;
  padding:2px 4px;flex-shrink:0;background:#c0c0c0;
}
.pos-title{
  font-size:11px;font-weight:900;letter-spacing:0.05em;
  color:#00ff00;font-family:"Courier New",monospace;background:#000;padding:0 4px;
}
.bag-chip{
  display:flex;align-items:center;gap:2px;padding:1px 4px;
  background:#c0c0c0;border:1px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  font-size:10px;color:#000;font-family:"Courier New",monospace;
}
.bag-chip .bi{font-size:12px}
.pos-scroll{
  flex:1;overflow-y:auto;min-height:0;padding:4px;
  display:flex;flex-direction:column;gap:2px;
  -webkit-overflow-scrolling:touch;
  background:#000;
  border:2px solid;border-color:#808080 #dfdfdf #dfdfdf #808080;
  box-shadow:inset 1px 1px 0 #000, inset -1px -1px 0 #fff;
  margin:0 3px;font-family:"Courier New",monospace;color:#00ff00;
}
.pos-scroll::-webkit-scrollbar{width:12px;background:#c0c0c0}
.pos-scroll::-webkit-scrollbar-track{background:#c0c0c0;border-left:1px solid #808080}
.pos-scroll::-webkit-scrollbar-thumb{
  background:#c0c0c0;border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
}
.pos-scroll::-webkit-scrollbar-button{
  display:block;height:12px;background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
}
.pos-scroll{scrollbar-color:#c0c0c0 #c0c0c0;scrollbar-width:thin}

/* POS row */
.pos-row{
  display:grid;grid-template-columns:20px 1fr auto;
  gap:3px;align-items:center;padding:3px 4px;
  background:rgba(0,40,0,0.3);border:1px solid #003300;
  min-height:40px;font-family:"Courier New",monospace;
}
.pos-row .em{font-size:14px}
.pos-row .info{display:flex;flex-direction:column;gap:1px;min-width:0}
.pos-row .nm{
  font-size:12px;font-weight:bold;color:#00ff00;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  font-family:"Courier New",monospace;
}
.pos-row .pr{font-size:11px;color:#00cc00;font-family:"Courier New",monospace}
.pos-row .qty-ctrl{display:flex;align-items:center;gap:2px}
.qb{
  width:24px;height:24px;background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  color:#000;font-size:16px;font-weight:bold;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;font-family:"Courier New",monospace;
}
.qb:active{
  border-color:#000 #dfdfdf #dfdfdf #000;
  box-shadow:inset 1px 1px 0 #808080, inset -1px -1px 0 #fff;
}
.qn{
  width:16px;text-align:center;color:#00ff00;font-weight:900;font-size:12px;
  font-family:"Courier New",monospace;
}
.pos-row.sale{border-color:#880000}
.pos-row.sale .nm{color:#ff6666}
.pos-row.sale .pr{color:#ff4444}
.sale-dot{
  display:inline-block;padding:0 3px;background:#880000;
  color:#ff6666;font-size:9px;font-weight:bold;margin-left:3px;
  font-family:"Courier New",monospace;
}
.pos-foot{
  flex-shrink:0;padding:4px 6px;background:#000;
  border-top:1px solid #003300;
  display:flex;justify-content:space-between;align-items:center;
  margin:0 3px 3px;font-family:"Courier New",monospace;
}
.pos-foot .tl{font-size:11px;color:#00cc00}
.pos-foot .tv{
  font-size:16px;font-weight:900;color:#00ff00;
  text-shadow:0 0 4px rgba(0,255,0,0.4);
}
.pos-foot .tv::after{
  content:"_";animation:cursor-blink 1s step-end infinite;
}
@keyframes cursor-blink{0%,50%{opacity:1}51%,100%{opacity:0}}

/* ---- RIGHT: SCAN ZONE ---- */
.scan-panel{
  display:flex;flex-direction:column;background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  min-height:0;overflow:hidden;
}
.scan-content{
  position:relative;
  display:flex;flex-direction:column;align-items:center;
  justify-content:flex-end;
  gap:5px;padding:5px 4px;
  background:#fff;
  border:2px solid;border-color:#808080 #dfdfdf #dfdfdf #808080;
  box-shadow:inset 1px 1px 0 #000, inset -1px -1px 0 #fff;
  margin:3px;flex:1;min-height:0;overflow:hidden;
  font-family:"Times New Roman",serif;
}

/* Draggable item in scan zone */
.drag-item{
  position:absolute;
  width:72px;height:72px;
  margin-left:-36px; /* half-width offset for left-based centering */
  border-radius:4px;background:#fff;
  border:3px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:2px 2px 0 rgba(0,0,0,0.3),inset 1px 1px 0 #fff,inset -1px -1px 0 #808080;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:2px;
  cursor:grab;
  z-index:10;
  touch-action:none;
  animation:float-item 3s ease-in-out infinite;
  transition:box-shadow 0.15s;
}
.drag-item .item-emoji{font-size:28px;line-height:1;pointer-events:none}
.drag-item .il{
  font-size:9px;color:#000;letter-spacing:0.04em;
  font-family:"Times New Roman",serif;font-style:italic;pointer-events:none;
}
.drag-item.dragging{
  animation:none !important;
  cursor:grabbing;
  box-shadow:4px 4px 8px rgba(0,0,0,0.4),inset 1px 1px 0 #fff,inset -1px -1px 0 #808080;
  z-index:20;
}
@keyframes float-item{
  0%,100%{transform:translateY(0) rotate(-1deg)}
  50%{transform:translateY(-4px) rotate(1deg)}
}

/* Barcode zones on drag-item */
.bc-zone{
  position:absolute;
  background:repeating-linear-gradient(90deg,#000 0 1.5px,#fff 1.5px 3.5px);
  border:1px solid #808080;
  pointer-events:none;
  z-index:1;
  transition:box-shadow 0.15s,border-color 0.15s;
}
.bc-zone.discount{
  background:
    repeating-linear-gradient(90deg,#800 0 1.5px,#fcc 1.5px 3.5px);
  border:2px solid #c00;
  border-radius:2px;
  display:flex;align-items:center;justify-content:center;
}
.bc-zone .bc-label{
  font-size:7px;font-weight:900;color:#c00;
  font-family:'Courier New',monospace;
  background:rgba(255,255,255,0.85);
  padding:0 2px;border-radius:1px;
  white-space:nowrap;
  pointer-events:none;
}
.bc-zone.active{
  border-color:#0f0 !important;
  box-shadow:0 0 8px rgba(0,255,0,0.8);
}

/* Direction arrow */
.drag-arrow{
  font-size:22px;color:#000080;
  animation:arrow-v 1.2s ease-in-out infinite;
  flex-shrink:0;line-height:1;
  font-family:"Times New Roman",serif;font-weight:bold;
  z-index:1;
}
.drag-arrow.hidden{display:none}
@keyframes arrow-v{
  0%,100%{transform:translateY(0);opacity:0.3}
  50%{transform:translateY(5px);opacity:0.8}
}

/* Scanner drop zone */
.scanner-drop{
  width:100%;max-width:120px;height:52px;
  background:#fff;border:3px dashed #000080;
  box-shadow:inset 2px 2px 0 #808080, inset -2px -2px 0 #dfdfdf;
  position:relative;overflow:hidden;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:2px;flex-shrink:0;
  animation:drop-pulse 2s ease-in-out infinite;
  z-index:1;
}
.scanner-drop.hidden{display:none}
@keyframes drop-pulse{0%,100%{border-color:#000080}50%{border-color:#ff0000}}
.scanner-drop::before{
  content:"";position:absolute;left:12%;right:12%;top:50%;height:2px;
  background:#ff0000;box-shadow:0 0 6px rgba(255,0,0,0.6);
  animation:laser 1.6s ease-in-out infinite;border-radius:1px;
}
@keyframes laser{0%,100%{top:22%;opacity:1}50%{top:78%;opacity:0.5}}
.scanner-drop .sl{
  font-size:12px;font-weight:bold;letter-spacing:0.1em;
  color:#000080;z-index:1;font-family:"Times New Roman",serif;
}
.scanner-drop .ss{
  font-size:10px;color:#808080;z-index:1;
  font-family:"Times New Roman",serif;font-style:italic;
}
.scanner-drop.detecting{
  border-color:#0f0 !important;
  box-shadow:inset 0 0 12px rgba(0,255,0,0.4), 0 0 8px rgba(0,255,0,0.3);
  animation:none;
}

/* Scan progress bar */
.scan-prog{
  width:100%;max-width:120px;height:14px;background:#fff;
  border:2px solid;border-color:#808080 #dfdfdf #dfdfdf #808080;
  box-shadow:inset 1px 1px 0 #000, inset -1px -1px 0 #fff;
  overflow:hidden;flex-shrink:0;z-index:1;
}
.scan-prog.hidden{display:none}
.scan-prog-fill{
  height:100%;width:0%;
  background:repeating-linear-gradient(90deg,
    #000080 0px, #000080 8px,
    #c0c0c0 8px, #c0c0c0 10px);
  transition:width 0.1s linear;
}
.scan-msg{
  font-size:11px;font-weight:bold;color:#000;
  letter-spacing:0.02em;text-align:center;flex-shrink:0;
  font-family:"Times New Roman",serif;font-style:italic;
  z-index:1;white-space:pre-line;
}

/* Scan flash effect */
.scan-flash{
  animation:flash-anim 0.2s ease-out;
}
@keyframes flash-anim{
  0%{background:#afa}
  100%{background:#fff}
}

/* ================================================================
   [4] CART CAROUSEL
   ================================================================ */
.cart-zone{
  background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  margin:0 4px 3px;font-family:"MS Gothic","Arial Black",sans-serif;
}
.cart-top{
  display:flex;justify-content:space-between;align-items:center;
  padding:2px 6px;background:#c0c0c0;
}
.cart-title{
  font-size:12px;font-weight:bold;color:#000;
  font-family:"MS Gothic","Arial Black",sans-serif;letter-spacing:0.06em;
}
.cart-hint{
  font-size:10px;color:#808080;
  font-family:"MS Gothic","Arial Black",sans-serif;
  animation:hint-pulse 2s ease-in-out infinite;
}
@keyframes hint-pulse{0%,100%{opacity:0.4}50%{opacity:1}}
.cart-scroll{
  display:flex;gap:6px;padding:4px 6px 6px;
  overflow-x:auto;overflow-y:hidden;
  -webkit-overflow-scrolling:touch;
  scroll-snap-type:x mandatory;scroll-padding:0 6px;
  background:#000;
  border:2px solid;border-color:#808080 #dfdfdf #dfdfdf #808080;
  box-shadow:inset 1px 1px 0 #000, inset -1px -1px 0 #fff;
  margin:0 3px 3px;scrollbar-width:none;
  min-height:68px;
}
.cart-scroll::-webkit-scrollbar{display:none}
.cart-card{
  flex-shrink:0;width:58px;height:58px;
  background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:1px;font-size:26px;cursor:pointer;position:relative;
  scroll-snap-align:start;
  transition:transform 0.12s,border-color 0.12s;
  font-family:"MS Gothic","Arial Black",sans-serif;
}
.cart-card:active{
  transform:scale(1.05);
  border-color:#000 #dfdfdf #dfdfdf #000;
  box-shadow:inset 1px 1px 0 #808080, inset -1px -1px 0 #fff;
}
.cart-card.active{
  border-color:#000080;
  box-shadow:0 0 0 1px #000080,inset 1px 1px 0 #fff,inset -1px -1px 0 #808080;
  background:linear-gradient(180deg,#d0d0ff,#c0c0c0);
}
.cart-card .cn{
  font-size:9px;color:#000;letter-spacing:0.02em;
  font-family:"MS Gothic","Arial Black",sans-serif;
}
.cart-card .badge{
  position:absolute;top:-5px;right:-5px;
  min-width:18px;height:18px;border-radius:9px;
  background:#ff0000;color:#fff;font-size:10px;font-weight:900;
  display:flex;align-items:center;justify-content:center;
  border:2px solid #fff;box-shadow:1px 1px 0 #000;padding:0 2px;
  font-family:"MS Gothic","Arial Black",sans-serif;
}
.cart-card .sbadge{
  position:absolute;top:-5px;left:-5px;
  min-width:18px;height:18px;border-radius:9px;
  background:#ff0000;color:#fff;font-size:8px;font-weight:900;
  display:flex;align-items:center;justify-content:center;
  border:2px solid #fff;box-shadow:1px 1px 0 #000;padding:0 2px;
  font-family:"MS Gothic","Arial Black",sans-serif;
}

/* ================================================================
   [5] ACTION BUTTONS
   ================================================================ */
.action-bar{
  display:grid;grid-template-columns:1fr 1fr 1.8fr;gap:4px;
  padding:2px 4px calc(2px + env(safe-area-inset-bottom));
  background:#c0c0c0;border-top:2px solid #dfdfdf;
  box-shadow:inset 0 1px 0 #fff;font-family:"Segoe UI",Tahoma,system-ui;
}
.act-btn{
  background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  padding:3px;text-align:center;cursor:pointer;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:1px;min-height:42px;font-family:"Segoe UI",Tahoma,system-ui;
}
.act-btn:active{
  border-color:#000 #dfdfdf #dfdfdf #000;
  box-shadow:inset 1px 1px 0 #808080, inset -1px -1px 0 #fff;
}
.act-btn .ico{font-size:20px;line-height:1}
.act-btn .lbl{
  font-size:10px;font-weight:bold;letter-spacing:0.04em;color:#000;
  font-family:"Segoe UI",Tahoma,system-ui;
}
.checkout{
  background:#c0c0c0;
  border:3px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080, 0 0 0 1px #000;
  padding:3px;text-align:center;cursor:pointer;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:1px;min-height:42px;position:relative;overflow:hidden;
  font-family:"Segoe UI",Tahoma,system-ui;
}
.checkout::before{
  content:"";position:absolute;inset:3px;
  border:1px dotted #000;pointer-events:none;
}
.checkout:active{
  border-color:#000 #dfdfdf #dfdfdf #000;
  box-shadow:inset 1px 1px 0 #808080, inset -1px -1px 0 #fff, 0 0 0 1px #000;
}
.checkout .ck-main{
  font-size:14px;font-weight:900;letter-spacing:0.08em;color:#000;
  font-family:"Segoe UI",Tahoma,system-ui;text-decoration:underline;
}
.checkout .ck-sub{
  font-size:10px;color:#808080;letter-spacing:0.04em;
  font-family:"Segoe UI",Tahoma,system-ui;
}

/* ================================================================
   OVERLAY (title / round intro / game over / game clear)
   ================================================================ */
.overlay{
  position:absolute;inset:0;z-index:100;
  background:rgba(0,0,0,0.75);
  display:flex;align-items:center;justify-content:center;
  animation:overlay-in 0.3s ease-out;
}
.overlay.hidden{display:none}
@keyframes overlay-in{0%{opacity:0}100%{opacity:1}}
.overlay-inner{
  text-align:center;
  padding:20px;
}
.overlay-title{
  font-family:'Courier New',monospace;
  font-size:28px;font-weight:900;
  color:#fff;
  text-shadow:2px 2px 0 #000,0 0 10px rgba(0,255,0,0.5);
  letter-spacing:0.1em;
  margin-bottom:8px;
}
.overlay-title.title{
  color:#ffe040;
  text-shadow:2px 2px 0 #000,0 0 20px rgba(255,224,64,0.6);
  font-size:32px;
}
.overlay-title.success{color:#0f0}
.overlay-title.fail{color:#f44;text-shadow:2px 2px 0 #000,0 0 10px rgba(255,0,0,0.5)}
.overlay-title.clear{
  color:#ffe040;
  text-shadow:2px 2px 0 #000,0 0 20px rgba(255,224,64,0.8);
  animation:clear-glow 1s ease-in-out infinite alternate;
}
@keyframes clear-glow{
  0%{text-shadow:2px 2px 0 #000,0 0 10px rgba(255,224,64,0.5)}
  100%{text-shadow:2px 2px 0 #000,0 0 30px rgba(255,224,64,1)}
}
.overlay-sub{
  font-family:'Courier New',monospace;
  font-size:14px;color:#ccc;
  margin-bottom:16px;
}
.overlay-btn{
  font-family:'Courier New',monospace;
  font-size:14px;font-weight:bold;
  color:#000;background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  padding:8px 24px;cursor:pointer;
  letter-spacing:0.08em;
}
.overlay-btn:active{
  border-color:#000 #dfdfdf #dfdfdf #000;
  box-shadow:inset 1px 1px 0 #808080, inset -1px -1px 0 #fff;
}

/* ================================================================
   COMBO POPUP
   ================================================================ */
.combo-popup{
  position:absolute;
  top:50%;left:50%;
  transform:translate(-50%,-50%);
  font-family:'Courier New',monospace;
  font-size:20px;font-weight:900;
  color:#ffe040;
  text-shadow:2px 2px 0 #000,0 0 8px rgba(255,224,64,0.6);
  z-index:50;pointer-events:none;
  animation:combo-float 0.8s ease-out forwards;
}
@keyframes combo-float{
  0%{opacity:1;transform:translate(-50%,-50%) scale(1.3)}
  100%{opacity:0;transform:translate(-50%,-120%) scale(0.8)}
}

/* ================================================================
   Selection
   ================================================================ */
::selection{background:#000080;color:#fff}
