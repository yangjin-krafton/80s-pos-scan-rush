/* ================================================================
   [4] CART DESKTOP — scattered card layout
   ================================================================ */

.cart-zone{
  background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  margin:0 4px 3px;font-family:"MS Gothic","Arial Black",sans-serif;
  display:flex;flex-direction:column;min-height:0;overflow:hidden;
}
.cart-top{
  display:flex;justify-content:space-between;align-items:center;
  padding:2px 6px;background:#c0c0c0;flex-shrink:0;
}
.cart-title{
  font-size:12px;font-weight:bold;color:#000;
  font-family:"MS Gothic","Arial Black",sans-serif;letter-spacing:0.06em;
}
.cart-hint{
  font-size:10px;color:#808080;
  font-family:"MS Gothic","Arial Black",sans-serif;
  animation:hint-pulse 2s ease-in-out infinite;
}
@keyframes hint-pulse{0%,100%{opacity:0.4}50%{opacity:1}}

/* Desktop area where cards are scattered */
.cart-desktop{
  position:relative;flex:1;min-height:0;
  overflow:hidden;
  background:#008080;
  border:2px solid;border-color:#808080 #dfdfdf #dfdfdf #808080;
  box-shadow:inset 1px 1px 0 #000, inset -1px -1px 0 #fff;
  margin:0 3px 3px;
  /* tiled pattern like Win95 desktop */
  background-color:#008080;
  background-image:
    linear-gradient(45deg, rgba(0,0,0,0.04) 25%, transparent 25%),
    linear-gradient(-45deg, rgba(0,0,0,0.04) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, rgba(0,0,0,0.04) 75%),
    linear-gradient(-45deg, transparent 75%, rgba(0,0,0,0.04) 75%);
  background-size:12px 12px;
  background-position:0 0, 0 6px, 6px -6px, -6px 0;
}

/* Scattered card */
.cart-card{
  position:absolute;
  width:64px;height:64px;
  background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080,
             2px 2px 4px rgba(0,0,0,0.3);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:1px;font-size:28px;cursor:pointer;
  transition:transform 0.15s, box-shadow 0.15s, border-color 0.15s;
  font-family:"MS Gothic","Arial Black",sans-serif;
  touch-action:none;
  -webkit-user-select:none;user-select:none;
}
.cart-card:active{
  border-color:#000 #dfdfdf #dfdfdf #000;
  box-shadow:inset 1px 1px 0 #808080, inset -1px -1px 0 #fff;
}
.cart-card.active{
  border-color:#000080;
  box-shadow:0 0 0 2px #000080, 0 0 8px rgba(0,0,128,0.4),
             inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  background:linear-gradient(180deg,#d0d0ff,#c0c0c0);
  z-index:100 !important;
  transform:rotate(0deg) scale(1.08) !important;
}
.cart-card .cn{
  font-size:8px;color:#000;letter-spacing:0.02em;
  font-family:"MS Gothic","Arial Black",sans-serif;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  max-width:58px;text-align:center;
}
.cart-card .badge{
  position:absolute;top:-5px;right:-5px;
  min-width:18px;height:18px;border-radius:9px;
  background:#ff0000;color:#fff;font-size:10px;font-weight:900;
  display:flex;align-items:center;justify-content:center;
  border:2px solid #fff;box-shadow:1px 1px 0 #000;padding:0 2px;
  font-family:"MS Gothic","Arial Black",sans-serif;
}
.cart-card .sbadge{
  position:absolute;top:-5px;left:-5px;
  min-width:18px;height:18px;border-radius:9px;
  background:#ff0000;color:#fff;font-size:8px;font-weight:900;
  display:flex;align-items:center;justify-content:center;
  border:2px solid #fff;box-shadow:1px 1px 0 #000;padding:0 2px;
  font-family:"MS Gothic","Arial Black",sans-serif;
}

/* Card in .game (cross-zone drag / waiting in scan zone) */
.game > .cart-card{
  z-index:500;
}

/* Name → barcode when dragged out of cart */
.cart-card.in-game .cn{
  font-size:0 !important;color:transparent;
  width:48px;height:12px;max-width:none;
  background:repeating-linear-gradient(90deg,#000 0 1.5px,#fff 1.5px 3px);
  border:1px solid #808080;border-radius:1px;
}
.cart-card.in-game.is-sale .cn{
  background:repeating-linear-gradient(90deg,#800 0 1.5px,#fcc 1.5px 3px);
  border-color:#c00;
}

/* Fly-to-POS animation for card drag mode */
.cart-card.fly-to-pos{
  transition:left 0.3s ease-in, top 0.3s ease-in,
             transform 0.3s ease-in, opacity 0.3s ease-in;
  opacity:0;
  pointer-events:none;
}
