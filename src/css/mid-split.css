/* ================================================================
   [3] MID SPLIT — POS List + Scan Zone
   ================================================================ */

.mid-split{
  display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1fr);
  min-height:0;overflow:hidden;gap:3px;padding:3px 4px;background:#008080;
}

/* ---- LEFT: POS LIST ---- */
.pos-panel{
  display:flex;flex-direction:column;background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  min-height:0;overflow:hidden;
}
.pos-head{
  display:flex;justify-content:space-between;align-items:center;
  padding:2px 4px;flex-shrink:0;background:#c0c0c0;
}
.pos-title{
  font-size:11px;font-weight:900;letter-spacing:0.05em;
  color:#00ff00;font-family:"Courier New",monospace;background:#000;padding:0 4px;
}
.pos-scroll{
  flex:1;overflow-y:auto;min-height:0;padding:4px;
  display:flex;flex-direction:column;gap:2px;
  -webkit-overflow-scrolling:touch;
  background:#000;
  border:2px solid;border-color:#808080 #dfdfdf #dfdfdf #808080;
  box-shadow:inset 1px 1px 0 #000, inset -1px -1px 0 #fff;
  margin:0 3px;font-family:"Courier New",monospace;color:#00ff00;
}
.pos-scroll::-webkit-scrollbar{width:12px;background:#c0c0c0}
.pos-scroll::-webkit-scrollbar-track{background:#c0c0c0;border-left:1px solid #808080}
.pos-scroll::-webkit-scrollbar-thumb{
  background:#c0c0c0;border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
}
.pos-scroll::-webkit-scrollbar-button{
  display:block;height:12px;background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
}
.pos-scroll{scrollbar-color:#c0c0c0 #c0c0c0;scrollbar-width:thin}

/* POS row */
.pos-row{
  display:grid;grid-template-columns:20px 1fr auto;
  gap:3px;align-items:center;padding:2px 4px;
  background:rgba(0,40,0,0.3);border:1px solid #003300;
  min-height:28px;font-family:"Courier New",monospace;
}
.pos-row .em{font-size:14px}
.pos-row .dc{font-size:10px;color:#00cc00;font-family:"Courier New",monospace;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0}
.pos-row .dc .nm{font-size:11px;color:#00ff00;font-weight:bold}
.pos-row .qty-ctrl{display:flex;align-items:center;gap:2px}
.qb{
  width:24px;height:24px;background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  color:#000;font-size:16px;font-weight:bold;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;font-family:"Courier New",monospace;
}
.qb:active{
  border-color:#000 #dfdfdf #dfdfdf #000;
  box-shadow:inset 1px 1px 0 #808080, inset -1px -1px 0 #fff;
}
.qn{
  width:16px;text-align:center;color:#00ff00;font-weight:900;font-size:12px;
  font-family:"Courier New",monospace;
}
.pos-row.sale{border-color:#880000}
.pos-row.sale .nm{color:#ff6666}
.pos-row.sale .pr{color:#ff4444}
.sale-dot{
  display:inline-block;padding:0 3px;background:#880000;
  color:#ff6666;font-size:9px;font-weight:bold;margin-left:3px;
  font-family:"Courier New",monospace;
}
.pos-foot{
  flex-shrink:0;padding:3px 4px;background:#000;
  border-top:1px solid #003300;
  display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;
  gap:3px;
  margin:0 3px 3px;font-family:"Courier New",monospace;
}
.pos-foot .tl{font-size:11px;color:#00cc00}
.pos-foot .tv{
  font-size:14px;font-weight:900;color:#00ff00;
  text-shadow:0 0 4px rgba(0,255,0,0.4);
}
.pos-foot .tv::after{
  content:"_";animation:cursor-blink 1s step-end infinite;
}
@keyframes cursor-blink{0%,50%{opacity:1}51%,100%{opacity:0}}

/* Checkout button inside pos-foot */
.pos-foot .checkout{
  width:100%;
  background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080, 0 0 0 1px #000;
  padding:3px 6px;text-align:center;cursor:pointer;
  display:flex;align-items:center;justify-content:center;
  gap:6px;min-height:28px;position:relative;overflow:hidden;
  font-family:"Segoe UI",Tahoma,system-ui;
}
.pos-foot .checkout::before{
  content:"";position:absolute;inset:2px;
  border:1px dotted #000;pointer-events:none;
}
.pos-foot .checkout:active{
  border-color:#000 #dfdfdf #dfdfdf #000;
  box-shadow:inset 1px 1px 0 #808080, inset -1px -1px 0 #fff, 0 0 0 1px #000;
}
.pos-foot .checkout .ck-main{
  font-size:12px;font-weight:900;letter-spacing:0.08em;color:#000;
  font-family:"Segoe UI",Tahoma,system-ui;text-decoration:underline;
}
.pos-foot .checkout .ck-sub{
  font-size:9px;color:#808080;letter-spacing:0.04em;
  font-family:"Segoe UI",Tahoma,system-ui;
}

/* Checkout fail feedback */
.pos-foot .checkout.is-fail{
  animation:checkout-shake 0.35s steps(4) 1;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080, 0 0 0 1px #000, 0 0 8px #ff3b3b;
}
.pos-foot .checkout.is-fail::after{
  content:"";position:absolute;inset:0;
  background:linear-gradient(90deg, rgba(255,0,0,0.0), rgba(255,0,0,0.35), rgba(255,0,0,0.0));
  animation:checkout-flash 0.35s ease-out 1;
  pointer-events:none;
}
@keyframes checkout-shake{
  0%,100%{transform:translateX(0)}
  25%{transform:translateX(-2px)}
  50%{transform:translateX(2px)}
  75%{transform:translateX(-1px)}
}
@keyframes checkout-flash{
  0%{opacity:0}
  40%{opacity:1}
  100%{opacity:0}
}

/* ---- Discount control ---- */
.discount-ctrl{
  display:flex;align-items:center;justify-content:center;
  gap:4px;padding:3px 4px;background:#c0c0c0;flex-shrink:0;
}
.dc-btn{
  width:28px;height:22px;
  background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  font-size:12px;font-weight:bold;color:#000;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;
  font-family:"MS Gothic","Arial Black",sans-serif;
  padding:0;line-height:1;
}
.dc-btn:active{
  border-color:#000 #dfdfdf #dfdfdf #000;
  box-shadow:inset 1px 1px 0 #808080, inset -1px -1px 0 #fff;
}
.dc-val{
  font-size:11px;font-weight:900;color:#000;
  font-family:"MS Gothic","Arial Black",sans-serif;
  min-width:64px;text-align:center;
  background:#fff;
  border:2px solid;border-color:#808080 #dfdfdf #dfdfdf #808080;
  box-shadow:inset 1px 1px 0 #000;
  padding:1px 4px;
}
.dc-val.dc-active{
  background:#ffe0e0;color:#c00;
  font-weight:900;
}

/* ---- RIGHT: SCAN ZONE ---- */
.scan-panel{
  display:flex;flex-direction:column;background:#c0c0c0;
  border:2px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:inset 1px 1px 0 #fff, inset -1px -1px 0 #808080;
  min-height:0;overflow:hidden;
}
.scan-content{
  position:relative;
  display:flex;flex-direction:column;align-items:center;
  justify-content:flex-end;
  gap:5px;padding:5px 4px;
  background:#fff;
  border:2px solid;border-color:#808080 #dfdfdf #dfdfdf #808080;
  box-shadow:inset 1px 1px 0 #000, inset -1px -1px 0 #fff;
  margin:3px;flex:1;min-height:0;overflow:hidden;
  font-family:"Times New Roman",serif;
}

/* Draggable item in scan zone */
.drag-item{
  position:absolute;
  width:72px;height:72px;
  margin-left:-36px; /* half-width offset for left-based centering */
  border-radius:4px;background:#fff;
  border:3px solid;border-color:#dfdfdf #000 #000 #dfdfdf;
  box-shadow:2px 2px 0 rgba(0,0,0,0.3),inset 1px 1px 0 #fff,inset -1px -1px 0 #808080;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:2px;
  cursor:grab;
  z-index:10;
  touch-action:none;
  animation:float-item 3s ease-in-out infinite;
  transition:box-shadow 0.15s;
}
.drag-item .item-emoji{font-size:28px;line-height:1;pointer-events:none}
.drag-item .il{
  font-size:9px;color:#000;letter-spacing:0.04em;
  font-family:"Times New Roman",serif;font-style:italic;pointer-events:none;
}
.drag-item.dragging{
  animation:none !important;
  cursor:grabbing;
  box-shadow:4px 4px 8px rgba(0,0,0,0.4),inset 1px 1px 0 #fff,inset -1px -1px 0 #808080;
  z-index:20;
}
@keyframes float-item{
  0%,100%{transform:translateY(0) rotate(-1deg)}
  50%{transform:translateY(-4px) rotate(1deg)}
}

/* Barcode zones on drag-item */
.bc-zone{
  position:absolute;
  background:repeating-linear-gradient(90deg,#000 0 1.5px,#fff 1.5px 3.5px);
  border:1px solid #808080;
  pointer-events:none;
  z-index:1;
  transition:box-shadow 0.15s,border-color 0.15s;
}
.bc-zone.discount{
  background:
    repeating-linear-gradient(90deg,#800 0 1.5px,#fcc 1.5px 3.5px);
  border:2px solid #c00;
  border-radius:2px;
  display:flex;align-items:center;justify-content:center;
}
.bc-zone .bc-label{
  font-size:7px;font-weight:900;color:#c00;
  font-family:'Courier New',monospace;
  background:rgba(255,255,255,0.85);
  padding:0 2px;border-radius:1px;
  white-space:nowrap;
  pointer-events:none;
}
.bc-zone.active{
  border-color:#0f0 !important;
  box-shadow:0 0 8px rgba(0,255,0,0.8);
}

/* Direction arrow */
.drag-arrow{
  font-size:22px;color:#000080;
  animation:arrow-v 1.2s ease-in-out infinite;
  flex-shrink:0;line-height:1;
  font-family:"Times New Roman",serif;font-weight:bold;
  z-index:1;
}
.drag-arrow.hidden{display:none}
@keyframes arrow-v{
  0%,100%{transform:translateY(0);opacity:0.3}
  50%{transform:translateY(5px);opacity:0.8}
}

/* Scanner drop zone */
.scanner-drop{
  width:100%;max-width:120px;height:52px;
  background:#fff;border:3px dashed #000080;
  box-shadow:inset 2px 2px 0 #808080, inset -2px -2px 0 #dfdfdf;
  position:relative;overflow:hidden;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:2px;flex-shrink:0;
  animation:drop-pulse 2s ease-in-out infinite;
  z-index:1;
}
.scanner-drop.hidden{display:none}
@keyframes drop-pulse{0%,100%{border-color:#000080}50%{border-color:#ff0000}}
.scanner-drop::before{
  content:"";position:absolute;left:12%;right:12%;top:50%;height:2px;
  background:#ff0000;box-shadow:0 0 6px rgba(255,0,0,0.6);
  animation:laser 1.6s ease-in-out infinite;border-radius:1px;
}
@keyframes laser{0%,100%{top:22%;opacity:1}50%{top:78%;opacity:0.5}}
.scanner-drop .sl{
  font-size:12px;font-weight:bold;letter-spacing:0.1em;
  color:#000080;z-index:1;font-family:"Times New Roman",serif;
}
.scanner-drop .ss{
  font-size:10px;color:#808080;z-index:1;
  font-family:"Times New Roman",serif;font-style:italic;
}
.scanner-drop.detecting{
  border-color:#0f0 !important;
  box-shadow:inset 0 0 12px rgba(0,255,0,0.4), 0 0 8px rgba(0,255,0,0.3);
  animation:none;
}

/* Scan progress bar */
.scan-prog{
  width:100%;max-width:120px;height:14px;background:#fff;
  border:2px solid;border-color:#808080 #dfdfdf #dfdfdf #808080;
  box-shadow:inset 1px 1px 0 #000, inset -1px -1px 0 #fff;
  overflow:hidden;flex-shrink:0;z-index:1;
}
.scan-prog.hidden{display:none}
.scan-prog-fill{
  height:100%;width:0%;
  background:repeating-linear-gradient(90deg,
    #000080 0px, #000080 8px,
    #c0c0c0 8px, #c0c0c0 10px);
  transition:width 0.1s linear;
}
.scan-msg{
  font-size:11px;font-weight:bold;color:#000;
  letter-spacing:0.02em;text-align:center;flex-shrink:0;
  font-family:"Times New Roman",serif;font-style:italic;
  z-index:1;white-space:pre-line;
}

/* Scan flash effect */
.scan-flash{
  animation:flash-anim 0.2s ease-out;
}
@keyframes flash-anim{
  0%{background:#afa}
  100%{background:#fff}
}

/* Scan fail red flash */
.scan-fail-flash{
  animation:fail-flash 0.5s ease-out;
}
@keyframes fail-flash{
  0%,40%{background:#f66}
  20%,60%{background:#faa}
  80%{background:#fdd}
  100%{background:#fff}
}

/* Drop-hover highlight for scan panel */
.scan-panel.drop-hover{box-shadow:inset 0 0 12px rgba(0,128,255,0.4)}

/* ================================================================
   META: CRT Blackout — POS power-off / reboot / power-on
   ================================================================ */

.pos-panel.crt-blackout .pos-scroll{
  background:#000 !important;
  animation:crt-off 0.3s ease-in forwards;
  overflow:hidden;
}
.pos-panel.crt-blackout .pos-scroll *{
  visibility:hidden;
}
.pos-panel.crt-blackout .pos-foot{
  background:#000 !important;
}
.pos-panel.crt-blackout .pos-foot *{
  visibility:hidden;
}

@keyframes crt-off{
  0%  {filter:brightness(1);transform:scaleY(1)}
  40% {filter:brightness(2);transform:scaleY(1)}
  60% {filter:brightness(0);transform:scaleY(0.005)}
  80% {filter:brightness(0);transform:scaleY(0.005)}
  100%{filter:brightness(0);transform:scaleY(0)}
}

/* CRT Reboot text */
.pos-panel.crt-reboot .pos-scroll{
  animation:none;transform:scaleY(1);filter:none;
}
.pos-panel.crt-reboot .pos-scroll::before{
  content:"C:\\POS> SYSTEM REBOOT...\APLEASE WAIT..._";
  visibility:visible;
  color:#00ff00;
  font-family:'Courier New',monospace;
  font-size:10px;
  white-space:pre-line;
  padding:8px;
  display:block;
  animation:crt-blink 0.8s step-end infinite;
}
@keyframes crt-blink{
  0%,50%{opacity:1}
  51%,100%{opacity:0}
}

/* CRT Power-on restore */
.pos-panel.crt-poweron .pos-scroll{
  animation:crt-on 0.5s ease-out forwards !important;
}
.pos-panel.crt-poweron .pos-scroll *{
  visibility:visible !important;
}
.pos-panel.crt-poweron .pos-foot *{
  visibility:visible !important;
}
@keyframes crt-on{
  0%  {filter:brightness(0);transform:scaleY(0)}
  30% {filter:brightness(2);transform:scaleY(0.01)}
  60% {filter:brightness(1.5);transform:scaleY(1)}
  100%{filter:brightness(1);transform:scaleY(1)}
}

/* ================================================================
   META: Damaged barcode overlay (on drag card)
   ================================================================ */

.bc-damaged{
  position:absolute;
  left:10%;right:10%;bottom:8%;
  height:28%;
  background:repeating-linear-gradient(
    90deg,
    rgba(128,0,0,0.3) 0 2px,
    rgba(255,200,200,0.3) 2px 4px
  );
  border:2px dashed #cc0000;
  display:flex;align-items:center;justify-content:center;
  pointer-events:none;z-index:5;
  border-radius:2px;
}
.bc-dmg-label{
  font-size:7px;font-weight:900;color:#cc0000;
  background:rgba(255,255,255,0.85);
  padding:0 3px;border-radius:1px;
  font-family:'Courier New',monospace;
  white-space:nowrap;pointer-events:none;
}

/* ================================================================
   META: POS row cancel flash
   ================================================================ */

.pos-row.cancel-flash{
  animation:pos-cancel-flash 1s ease-out;
}
@keyframes pos-cancel-flash{
  0%,20%,40%{background:rgba(200,0,0,0.4)}
  10%,30%{background:rgba(0,40,0,0.3)}
  100%{background:rgba(0,40,0,0.3)}
}
